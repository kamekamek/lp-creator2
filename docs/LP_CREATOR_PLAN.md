# LP Creator 実装計画書

- **作成日:** 2025年06月12日
- **作成者:** Cascade (with 亀野さん)
- **バージョン:** 1.0

## 1. プロジェクト概要

ユーザーが簡単な指示（プロンプト）を入力するだけで、高品質なランディングページ（LP）の完全なHTML/CSS/JSを生成するAIアプリケーション「LP Creator」の開発計画書。

### 1.1. 設計思想

- **Before（従来の複雑なアプローチ）**: ユーザーが複数のツールを使いこなし、各セクションを個別に生成・結合する必要があった。
- **After（本プロジェクトのアプローチ）**: ユーザーはAIとの対話に集中するだけ。単一の統合された体験を通じて、即座にプレビュー・編集・ダウンロード可能な完全なLPを提供する。

### 1.2. 技術スタック

- **フロントエンド**: Next.js 15, React 19, TypeScript, Tailwind CSS
- **AI統合**: Vercel AI SDK v4, OpenAI GPT-4o, Claude 3.5 Sonnet
- **状態管理**: React Context, `useState`/`useCallback`
- **テスト**: Jest, React Testing Library, Playwright
- **CI/CD**: GitHub Actions

### 1.3. ディレクトリ構成案

```
lp-creator/
├── ai/                              # AI統合レイヤー
│   ├── tools/                     # ツール管理（統合済み）
│   └── unified-lp-generator.ts      # 統合LP生成エンジン
│
├── app/                             # Next.js App Router
│   ├── components/                  # UIコンポーネント
│   │   ├── UnifiedLPViewer.tsx      # LP表示・プレビュー
│   │   ├── ChatPanel.tsx            # チャットUI
│   │   ├── EditableText.tsx         # テキスト編集機能
│   │   └── EditableImageContainer.tsx # 画像編集機能
│   │
│   ├── contexts/                    # React Context
│   │   └── EditModeContext.tsx      # 編集モード管理
│   │
│   ├── api/                         # API Routes
│   │   └── chat/route.ts            # AI SDK統合エンドポイント
│   │
│   ├── page.tsx                     # メインページ
│   └── layout.tsx                   # アプリレイアウト
│
├── public/                          # 静的ファイル
└── ... (tsconfig.json, package.json, etc.)
```

## 2. 実装フェーズ計画

### フェーズ1: MVP（Minimum Viable Product）構築

- **目標**: ユーザーがプロンプトを入力すると、単一のHTMLファイルとしてLPが生成され、プレビューできるコア体験を最速で実現する。
- **主要タスク**:
  1.  **プロジェクト初期化**: `create-next-app` でNext.js 15 + TypeScript + Tailwind CSSのプロジェクトを新規作成。
  2.  **UI骨格実装**: 2カラムレイアウト（左: チャットパネル、右: プレビュー）を `app/page.tsx` に実装。
  3.  **APIエンドポイント作成**: `app/api/chat/route.ts` にVercel AI SDKを統合。
  4.  **統合LP生成ツール (v1)**: `ai/unified-lp-generator.ts` を作成。単一のプロンプトでLP全体のHTMLを生成するシンプルなツールを実装。
  5.  **プレビュー機能実装**: `UnifiedLPViewer.tsx` で、生成されたHTMLを `iframe` を用いて表示。
- **成果物**: プロンプトからLPのHTMLが生成され、画面に表示される状態。

### フェーズ2: 生成品質の向上と構成案の導入

- **目標**: 生成されるLPの品質と構造を向上させ、より実用的なものにする。
- **主要タスク**:
  1.  **構成案生成ステップの導入**: AIがまずLP全体の構成案（アウトライン）をJSON形式で生成するロジックを実装。
  2.  **セクション単位の生成**: 構成案に基づき、各セクションのHTMLを個別に生成し、結合するロジックにリファクタリング。
  3.  **プロンプトの高度化**: セクションの種類（ヒーロー、特徴、料金プラン等）ごとに特化したプロンプトを設計し、品質を向上させる。
  4.  **UI改善**: 生成された構成案をリスト表示し、ユーザーが確認できるUIを実装。
- **成果物**: 構造化された高品質なLPが生成される状態。

### フェーズ3: インタラクティブ編集機能の実装

- **目標**: 生成されたLPをユーザーがブラウザ上で直感的に編集できるようにする。
- **主要タスク**:
  1.  **編集モード実装**: `EditModeContext` を導入し、表示/編集モードを切り替え可能にする。
  2.  **インラインテキスト編集**: `EditableText.tsx` を実装し、クリックしたテキストを直接編集できるようにする。
  3.  **画像差し替え機能**: `EditableImageContainer.tsx` を実装し、画像のアップロードや差し替えを可能にする。
  4.  **チャットによる部分修正**: プレビュー上の要素を選択し、「このボタンの色を変えて」といった指示で部分的な再生成ができる機能を実装。
- **成果物**: 生成されたLPのテキストや画像をユーザーが直接編集できる状態。

### フェーズ4: プロダクト化と完成度の向上

- **目標**: プロダクトとして公開できるレベルまで品質を引き上げる。
- **主要タスク**:
  1.  **ダウンロード機能**: 編集後のLPを `index.html` (+CSS/JS) としてダウンロードできる機能を実装。
  2.  **マルチモデル対応**: Claude 3.5 Sonnetなど、複数のAIモデルを選択できるUIとロジックを実装。
  3.  **テスト強化**: Jest, Playwrightによる単体・E2Eテストを拡充。
  4.  **パフォーマンス最適化**: Web Vitalsを指標としたパフォーマンスチューニングを実施。
  5.  **CI/CDパイプライン構築**: GitHub Actionsでテストとビルドを自動化。
- **成果物**: 堅牢で高機能なLP作成アプリケーション。

## 3. 重要アーキテクチャ詳細

### 3.1. 統合LP生成エンジンの内部フロー

ユーザー体験上は「統合ツール」だが、内部的には以下の2ステップで品質を担保する。

1.  **構成案生成**: ユーザーの初期プロンプトから、LP全体の構成（セクションの順序、各セクションの概要）をJSONで生成。
2.  **セクション逐次生成**: 確定した構成案に基づき、各セクションのHTML+CSSを一つずつ生成。これにより、エラーハンドリングや部分的な再生成が容易になる。

### 3.2. インタラクティブ編集機能の実装方式

AIが生成するHTMLに、編集可能な各要素（テキスト、画像コンテナ等）へ `data-editable-id="unique-id"` のようなカスタムデータ属性を付与させる。React側ではこの属性をフックして、対応する要素にイベントリスナー（クリックで編集可能にする等）を動的にアタッチする。

## 4. 次のステップ

1.  本計画書の内容について最終確認を行う。
2.  合意が取れ次第、新しいディレクトリで**フェーズ1**のタスクに着手する。
