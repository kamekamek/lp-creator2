# LP Creator 緊急修正計画書

**作成日:** 2025年06月13日  
**優先度:** 🔥 CRITICAL  
**状況:** 現在のLP生成結果が実用不可能なレベル

## 🚨 現状の深刻な問題点

### 1. UI/UX設計の根本的な誤り
- **問題:** チャットエリア内にLPプレビューが表示されている
- **期待動作:** 左側：チャット、右側：LPプレビューの2カラムレイアウト
- **影響:** ユーザー体験が完全に破綻

### 2. 生成されるLPの品質問題
- **CSS完全欠如:** スタイリングが一切適用されていない
- **画像表示不良:** alt textのみ表示、実際の画像が表示されない
- **レイアウト崩壊:** 1990年代のプレーンHTMLレベル
- **実用性:** 商用利用不可能

### 3. アーキテクチャの不整合
- **計画書との乖離:** 実装が設計文書と全く異なる
- **コンポーネント設計:** LpDisplayコンポーネントが存在しない
- **状態管理:** メッセージフィルタリングロジックが複雑すぎる

## 🎯 修正計画

### Phase A: 緊急対応（即時実行）

#### A1. UIレイアウトの根本修正
**Priority: 🔥 CRITICAL**
```
- page.tsx の MainView を完全に再設計
- 右側エリアを独立したLPプレビューエリアに変更
- チャットエリアからLPコンテンツを完全に分離
- 2カラムレイアウトの確実な実装
```

#### A2. 存在しないコンポーネントの作成
**Priority: 🔥 CRITICAL**
```
- app/components/LpDisplay.tsx を作成
- LPオブジェクトを受け取り、適切にレンダリング
- LPViewer.tsx との連携確保
```

#### A3. LP生成品質の最低限修正
**Priority: 🔥 CRITICAL**
```
- lpGeneratorTool.ts でCSS生成を強制
- 基本的なTailwind CSSクラスの適用
- 画像プレースホルダーの適切な実装
```

### Phase B: 品質向上（短期実行）

#### B1. CSS/スタイリング強化
**Priority: 🔴 HIGH**
```
- lpGeneratorTool.ts のプロンプト改善
- レスポンシブデザインの実装
- 色彩・フォント・レイアウトの標準化
- Tailwind CSS利用の最適化
```

#### B2. 画像表示システム修正
**Priority: 🔴 HIGH**
```
- プレースホルダー画像の適切な実装
- 画像URLの生成と管理
- 編集モードでの画像差し替え機能
```

#### B3. 状態管理の簡素化
**Priority: 🟡 MEDIUM**
```
- メッセージフィルタリングロジックの簡素化
- UIState/AIStateの最適化
- 不要な複雑性の除去
```

### Phase C: 機能完成（中期実行）

#### C1. 編集機能の完全実装
**Priority: 🟡 MEDIUM**
```
- インライン編集の改善
- 部分更新機能の安定化
- undo/redo機能の実装
```

#### C2. エクスポート機能
**Priority: 🟢 LOW**
```
- HTML/CSS/JSの完全なエクスポート
- 自己完結型ファイルの生成
- ZIPダウンロード機能
```

## 📋 実装順序（優先度順）

### 🔥 今すぐ実行すべき作業

1. **LpDisplay.tsx の作成** - 存在しないコンポーネントの緊急作成
2. **page.tsx の MainView 修正** - 2カラムレイアウトの確実な実装
3. **lpGeneratorTool.ts のCSS生成修正** - 最低限見れるレベルへ

### 🔴 本日中に完了すべき作業

4. **画像プレースホルダー実装** - 画像表示問題の解決
5. **基本的なスタイリング強化** - Tailwindクラスの適切な適用
6. **動作テスト** - 基本機能の確認

### 🟡 今週中に完了すべき作業

7. **レスポンシブデザイン対応**
8. **編集機能の安定化**
9. **エラーハンドリング強化**

## 🎯 成功基準

### 最低基準（Phase A完了）
- [ ] 2カラムレイアウトが正常に動作
- [ ] 生成されたLPが最低限見れるレベル
- [ ] CSS/スタイリングが適用されている
- [ ] 画像が適切に表示される

### 実用基準（Phase B完了）
- [ ] 商用レベルのデザイン品質
- [ ] レスポンシブ対応
- [ ] 編集機能が安定動作
- [ ] エラーが発生しない

### 完成基準（Phase C完了）
- [ ] 計画書と同等の機能
- [ ] エクスポート機能
- [ ] 包括的なテスト完了

## ⚠️ リスク要因

1. **技術的債務:** 現在のコードベースの複雑性
2. **時間制約:** 緊急性vs品質のトレードオフ
3. **依存関係:** Mastraフレームワークとの整合性
4. **ユーザビリティ:** 設計変更によるUX影響

## 🔄 次のアクション

**即座に開始:**
1. LpDisplay.tsx の作成
2. page.tsx の MainView 修正開始
3. lpGeneratorTool.ts のCSS生成改善

**作業手順:**
- 各Phase内で優先度順に実行
- 修正完了後は必ず動作確認
- 問題発見時は即座にエスカレーション